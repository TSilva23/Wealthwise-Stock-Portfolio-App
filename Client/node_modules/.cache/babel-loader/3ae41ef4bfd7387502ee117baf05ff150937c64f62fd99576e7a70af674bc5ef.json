{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useUser}from'./Usercontext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Portfolio=()=>{const[portfolio,setPortfolio]=useState([]);const[totalValue,setTotalValue]=useState(0);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const{userId}=useUser();useEffect(()=>{fetchPortfolio();},[userId]);const fetchPortfolio=async()=>{if(!userId){setError('No user ID found. Please log in.');setLoading(false);return;}try{setLoading(true);const response=await axios.get(\"https://capstoneprojectmcsbt1.ew.r.appspot.com/api/portfolio\",{withCredentials:true,headers:{'Authorization':\"Bearer \".concat(userId)}});if(response.data&&response.data.stocks){setPortfolio(response.data.stocks);setTotalValue(response.data.total_current_value||0);}else{console.error('Unexpected response structure:',response);setError('Failed to load portfolio. Please try again later.');}}catch(error){console.error('Error fetching portfolio:',error);setError('Failed to load portfolio. Please try again later.');}finally{setLoading(false);}};const removeStock=async symbol=>{try{const response=await axios.post('https://capstoneprojectmcsbt1.ew.r.appspot.com/api/portfolio/remove',{SYMBOL:symbol},{withCredentials:true,headers:{'Authorization':\"Bearer \".concat(userId)}});if(response.status===200){// Re-fetch portfolio to update UI\nfetchPortfolio();// Or manually adjust the portfolio state to reflect the removal, which could be more efficient\n}}catch(error){console.error('Error removing stock:',error);setError('Failed to remove stock. Please try again later.');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Portfolio\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Total Value: $\",totalValue?totalValue.toFixed(2):'0.00']}),portfolio.length>0?/*#__PURE__*/_jsx(\"ul\",{children:portfolio.map((stock,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"Symbol: \",stock.SYMBOL,\", Name: \",stock.NAME,\", Quantity: \",stock.QUANTITY,\", Acquisition Price: \",stock.ACQUISITION_PRICE,\", Acquisition Date: \",stock.ACQUISITION_DATE,\", Current Price: \",stock.CURRENT_PRICE?stock.CURRENT_PRICE.toFixed(2):'N/A',\", Current Value: \",stock.CURRENT_VALUE?stock.CURRENT_VALUE.toFixed(2):'N/A',/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeStock(stock.SYMBOL),style:{marginLeft:'10px'},children:\"Remove\"})]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"Your portfolio is empty.\"})]});};export default Portfolio;","map":{"version":3,"names":["React","useEffect","useState","axios","useUser","jsx","_jsx","jsxs","_jsxs","Portfolio","portfolio","setPortfolio","totalValue","setTotalValue","loading","setLoading","error","setError","userId","fetchPortfolio","response","get","withCredentials","headers","concat","data","stocks","total_current_value","console","removeStock","symbol","post","SYMBOL","status","children","toFixed","length","map","stock","index","NAME","QUANTITY","ACQUISITION_PRICE","ACQUISITION_DATE","CURRENT_PRICE","CURRENT_VALUE","onClick","style","marginLeft"],"sources":["/home/tristan/Desktop/Capstone project/Wealthwise/my-app/Client/src/Components/Portfolio.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useUser } from './Usercontext';\n\nconst Portfolio = () => {\n  const [portfolio, setPortfolio] = useState([]);\n  const [totalValue, setTotalValue] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { userId } = useUser();\n\n  useEffect(() => {\n    fetchPortfolio();\n  }, [userId]);\n\n  const fetchPortfolio = async () => {\n    if (!userId) {\n      setError('No user ID found. Please log in.');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await axios.get(`https://capstoneprojectmcsbt1.ew.r.appspot.com/api/portfolio`, {\n        withCredentials: true,\n        headers: { 'Authorization': `Bearer ${userId}` }\n      });\n      if (response.data && response.data.stocks) {\n        setPortfolio(response.data.stocks);\n        setTotalValue(response.data.total_current_value || 0);\n      } else {\n        console.error('Unexpected response structure:', response);\n        setError('Failed to load portfolio. Please try again later.');\n      }\n    } catch (error) {\n      console.error('Error fetching portfolio:', error);\n      setError('Failed to load portfolio. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const removeStock = async (symbol) => {\n    try {\n      const response = await axios.post('https://capstoneprojectmcsbt1.ew.r.appspot.com/api/portfolio/remove', \n        { SYMBOL: symbol }, \n        { withCredentials: true, headers: { 'Authorization': `Bearer ${userId}` } }\n      );\n      if (response.status === 200) {\n        // Re-fetch portfolio to update UI\n        fetchPortfolio();\n        // Or manually adjust the portfolio state to reflect the removal, which could be more efficient\n      }\n    } catch (error) {\n      console.error('Error removing stock:', error);\n      setError('Failed to remove stock. Please try again later.');\n    }\n  };\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n\n  return (\n    <div>\n      <h1>Your Portfolio</h1>\n      <h2>Total Value: ${totalValue ? totalValue.toFixed(2) : '0.00'}</h2>\n      {portfolio.length > 0 ? (\n        <ul>\n          {portfolio.map((stock, index) => (\n            <li key={index}>\n              Symbol: {stock.SYMBOL}, Name: {stock.NAME}, Quantity: {stock.QUANTITY}, \n              Acquisition Price: {stock.ACQUISITION_PRICE}, Acquisition Date: {stock.ACQUISITION_DATE}, \n              Current Price: {stock.CURRENT_PRICE ? stock.CURRENT_PRICE.toFixed(2) : 'N/A'},\n              Current Value: {stock.CURRENT_VALUE ? stock.CURRENT_VALUE.toFixed(2) : 'N/A'}\n              <button onClick={() => removeStock(stock.SYMBOL)} style={{ marginLeft: '10px' }}>Remove</button>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>Your portfolio is empty.</p>\n      )}\n    </div>\n  );\n};\n\nexport default Portfolio;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
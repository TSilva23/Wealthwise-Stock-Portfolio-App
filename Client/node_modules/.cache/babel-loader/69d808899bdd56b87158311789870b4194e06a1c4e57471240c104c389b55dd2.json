{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useUser}from'./Usercontext';// Import the hook from your context file\nimport{useParams}from'react-router-dom';import axios from'axios';import{Chart}from'react-chartjs-2';import\"chart.js/auto\";import\"chartjs-adapter-date-fns\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const StockDetails=()=>{const[originalData,setOriginalData]=useState([]);const[details,setDetails]=useState({});const[latestQuote,setLatestQuote]=useState({});const[error,setError]=useState('');const{symbol}=useParams();useEffect(()=>{const fetchDetails=async()=>{try{// Fetch the historical data for the stock\nconst response=await axios.get(\"https://capstoneprojectmcsbt1.ew.r.appspot.com/api/stock/\".concat(symbol));const weeklyTimeSeries=response.data['Weekly Time Series'];const chartData=Object.entries(weeklyTimeSeries).map(_ref=>{let[date,data]=_ref;return{date,open:parseFloat(data['1. open']),high:parseFloat(data['2. high']),low:parseFloat(data['3. low']),close:parseFloat(data['4. close']),volume:parseFloat(data['5. volume'])};});setOriginalData(chartData);setDetails(chartData[0]);// Assume the latest entry is the first one\n// Fetch the latest quote for the stock\nconst quoteResponse=await axios.get(\"https://capstoneprojectmcsbt1.ew.r.appspot.com/api/quote/\".concat(symbol));const quoteData=quoteResponse.data['Global Quote'];setLatestQuote({open:parseFloat(quoteData['02. open']),high:parseFloat(quoteData['03. high']),low:parseFloat(quoteData['04. low']),price:parseFloat(quoteData['05. price']),volume:parseFloat(quoteData['06. volume']),latestTradingDay:quoteData['07. latest trading day'],previousClose:parseFloat(quoteData['08. previous close']),change:parseFloat(quoteData['09. change']),changePercent:quoteData['10. change percent']});}catch(error){console.error('Error fetching details:',error);setError('Error fetching data. Please try again later.');}};fetchDetails();},[symbol]);const chartOptions={responsive:true,plugins:{legend:{display:true}},scales:{x:{type:'time',time:{unit:'day',tooltipFormat:'ll'},title:{display:true,text:'Date'}},y:{beginAtZero:false,title:{display:true,text:'Price'}}}};const chartData={labels:originalData.map(data=>data.date),datasets:[{label:'Open',data:originalData.map(data=>data.open),borderColor:'rgb(255, 99, 132)',backgroundColor:'rgba(255, 99, 132, 0.5)'},{label:'Close',data:originalData.map(data=>data.close),borderColor:'rgb(54, 162, 235)',backgroundColor:'rgba(54, 162, 235, 0.5)'}]};if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error fetching data: \",error]});if(!originalData.length)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:symbol}),latestQuote&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Latest Quote\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Open: \",latestQuote.open]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"High: \",latestQuote.high]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Low: \",latestQuote.low]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",latestQuote.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Volume: \",latestQuote.volume]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Latest Trading Day: \",latestQuote.latestTradingDay]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Previous Close: \",latestQuote.previousClose]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Change: \",latestQuote.change]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Change Percent: \",latestQuote.changePercent]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Historical Stock Performance\"}),/*#__PURE__*/_jsx(Chart,{type:\"line\",data:chartData,options:chartOptions})]})]});};export default StockDetails;","map":{"version":3,"names":["React","useState","useEffect","useUser","useParams","axios","Chart","jsxs","_jsxs","jsx","_jsx","StockDetails","originalData","setOriginalData","details","setDetails","latestQuote","setLatestQuote","error","setError","symbol","fetchDetails","response","get","concat","weeklyTimeSeries","data","chartData","Object","entries","map","_ref","date","open","parseFloat","high","low","close","volume","quoteResponse","quoteData","price","latestTradingDay","previousClose","change","changePercent","console","chartOptions","responsive","plugins","legend","display","scales","x","type","time","unit","tooltipFormat","title","text","y","beginAtZero","labels","datasets","label","borderColor","backgroundColor","children","length","options"],"sources":["/home/tristan/Desktop/Capstone project/Wealthwise/my-app/Client/src/Components/Stockdetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useUser } from './Usercontext'; // Import the hook from your context file\n\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { Chart } from 'react-chartjs-2';\nimport \"chart.js/auto\";\nimport \"chartjs-adapter-date-fns\";\n\n\nconst StockDetails = () => {\n  const [originalData, setOriginalData] = useState([]);\n  const [details, setDetails] = useState({});\n  const [latestQuote, setLatestQuote] = useState({});\n  const [error, setError] = useState('');\n  const { symbol } = useParams();\n\n  useEffect(() => {\n    const fetchDetails = async () => {\n      try {\n        // Fetch the historical data for the stock\n        const response = await axios.get(`https://capstoneprojectmcsbt1.ew.r.appspot.com/api/stock/${symbol}`);\n        const weeklyTimeSeries = response.data['Weekly Time Series'];\n        const chartData = Object.entries(weeklyTimeSeries).map(([date, data]) => ({\n          date,\n          open: parseFloat(data['1. open']),\n          high: parseFloat(data['2. high']),\n          low: parseFloat(data['3. low']),\n          close: parseFloat(data['4. close']),\n          volume: parseFloat(data['5. volume']),\n        }));\n        setOriginalData(chartData);\n        setDetails(chartData[0]); // Assume the latest entry is the first one\n\n        // Fetch the latest quote for the stock\n        const quoteResponse = await axios.get(`https://capstoneprojectmcsbt1.ew.r.appspot.com/api/quote/${symbol}`);\n        const quoteData = quoteResponse.data['Global Quote'];\n        setLatestQuote({\n          open: parseFloat(quoteData['02. open']),\n          high: parseFloat(quoteData['03. high']),\n          low: parseFloat(quoteData['04. low']),\n          price: parseFloat(quoteData['05. price']),\n          volume: parseFloat(quoteData['06. volume']),\n          latestTradingDay: quoteData['07. latest trading day'],\n          previousClose: parseFloat(quoteData['08. previous close']),\n          change: parseFloat(quoteData['09. change']),\n          changePercent: quoteData['10. change percent'],\n        });\n      } catch (error) {\n        console.error('Error fetching details:', error);\n        setError('Error fetching data. Please try again later.');\n      }\n    };\n\n    fetchDetails();\n  }, [symbol]);\n\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        display: true,\n      },\n    },\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'day',\n          tooltipFormat: 'll',\n        },\n        title: {\n          display: true,\n          text: 'Date',\n        },\n      },\n      y: {\n        beginAtZero: false,\n        title: {\n          display: true,\n          text: 'Price',\n        },\n      },\n    },\n  };\n\n  const chartData = {\n    labels: originalData.map(data => data.date),\n    datasets: [\n      {\n        label: 'Open',\n        data: originalData.map(data => data.open),\n        borderColor: 'rgb(255, 99, 132)',\n        backgroundColor: 'rgba(255, 99, 132, 0.5)',\n      },\n      {\n        label: 'Close',\n        data: originalData.map(data => data.close),\n        borderColor: 'rgb(54, 162, 235)',\n        backgroundColor: 'rgba(54, 162, 235, 0.5)',\n      },\n    ],\n  };\n\n  if (error) return <div>Error fetching data: {error}</div>;\n  if (!originalData.length) return <div>Loading...</div>;\n\n  return (\n    <div>\n      <h1>{symbol}</h1>\n      {latestQuote && (\n        <div>\n          <h2>Latest Quote</h2>\n          <p>Open: {latestQuote.open}</p>\n          <p>High: {latestQuote.high}</p>\n          <p>Low: {latestQuote.low}</p>\n          <p>Price: {latestQuote.price}</p>\n          <p>Volume: {latestQuote.volume}</p>\n          <p>Latest Trading Day: {latestQuote.latestTradingDay}</p>\n          <p>Previous Close: {latestQuote.previousClose}</p>\n          <p>Change: {latestQuote.change}</p>\n          <p>Change Percent: {latestQuote.changePercent}</p>\n        </div>\n      )}\n      <div>\n        <h2>Historical Stock Performance</h2>\n        <Chart type=\"line\" data={chartData} options={chartOptions} />\n      </div>\n    </div>\n  );\n};\n\nexport default StockDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
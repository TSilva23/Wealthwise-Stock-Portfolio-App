{"ast":null,"code":"var _jsxFileName = \"/home/tristan/Desktop/Capstone project/Wealthwise/my-app/Client/src/Components/Portfolio.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useUser } from './Usercontext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Portfolio = () => {\n  _s();\n  const [portfolio, setPortfolio] = useState([]);\n  const [totalValue, setTotalValue] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const {\n    userId\n  } = useUser();\n  useEffect(() => {\n    fetchPortfolio();\n  }, [userId]);\n  const fetchPortfolio = async () => {\n    if (!userId) {\n      setError('No user ID found. Please log in.');\n      setLoading(false);\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await axios.get(`/api/portfolio`, {\n        withCredentials: true,\n        headers: {\n          'Authorization': `Bearer ${userId}`\n        }\n      });\n      if (response.data && response.data.stocks) {\n        setPortfolio(response.data.stocks);\n        setTotalValue(response.data.total_current_value || 0);\n      } else {\n        console.error('Unexpected response structure:', response);\n        setError('Failed to load portfolio. Please try again later.');\n      }\n    } catch (error) {\n      console.error('Error fetching portfolio:', error);\n      setError('Failed to load portfolio. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const removeStock = async (symbol, quantity) => {\n    try {\n      const response = await axios.post('/api/portfolio/remove', {\n        SYMBOL: symbol,\n        QUANTITY: quantity\n      }, {\n        withCredentials: true,\n        headers: {\n          'Authorization': `Bearer ${userId}`\n        }\n      });\n      if (response.status === 200) {\n        // Re-fetch portfolio to update UI\n        fetchPortfolio();\n        // Alternatively, manually adjust the portfolio state to reflect the removal\n      }\n    } catch (error) {\n      console.error('Error removing stock:', error);\n      setError('Failed to remove stock. Please try again later.');\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your Portfolio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Total Value: $\", totalValue ? totalValue.toFixed(2) : '0.00']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), portfolio.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: portfolio.map((stock, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [\"Symbol: \", stock.SYMBOL, \", Name: \", stock.NAME, \", Quantity: \", stock.QUANTITY, \", Acquisition Price: \", stock.ACQUISITION_PRICE, \", Acquisition Date: \", stock.ACQUISITION_DATE, \", Current Price: \", stock.CURRENT_PRICE ? stock.CURRENT_PRICE.toFixed(2) : 'N/A', \", Current Value: \", stock.CURRENT_VALUE ? stock.CURRENT_VALUE.toFixed(2) : 'N/A', /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeStock(stock.SYMBOL, stock.QUANTITY),\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Your portfolio is empty.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(Portfolio, \"AHzWjW49E24j31RvlqTPMXwGQnk=\", false, function () {\n  return [useUser];\n});\n_c = Portfolio;\nexport default Portfolio;\nvar _c;\n$RefreshReg$(_c, \"Portfolio\");","map":{"version":3,"names":["React","useEffect","useState","axios","useUser","jsxDEV","_jsxDEV","Portfolio","_s","portfolio","setPortfolio","totalValue","setTotalValue","loading","setLoading","error","setError","userId","fetchPortfolio","response","get","withCredentials","headers","data","stocks","total_current_value","console","removeStock","symbol","quantity","post","SYMBOL","QUANTITY","status","children","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","length","map","stock","index","NAME","ACQUISITION_PRICE","ACQUISITION_DATE","CURRENT_PRICE","CURRENT_VALUE","onClick","_c","$RefreshReg$"],"sources":["/home/tristan/Desktop/Capstone project/Wealthwise/my-app/Client/src/Components/Portfolio.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useUser } from './Usercontext';\n\nconst Portfolio = () => {\n  const [portfolio, setPortfolio] = useState([]);\n  const [totalValue, setTotalValue] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { userId } = useUser();\n\n  useEffect(() => {\n    fetchPortfolio();\n  }, [userId]);\n\n  const fetchPortfolio = async () => {\n    if (!userId) {\n      setError('No user ID found. Please log in.');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await axios.get(`/api/portfolio`, {\n        withCredentials: true,\n        headers: { 'Authorization': `Bearer ${userId}` }\n      });\n      if (response.data && response.data.stocks) {\n        setPortfolio(response.data.stocks);\n        setTotalValue(response.data.total_current_value || 0);\n      } else {\n        console.error('Unexpected response structure:', response);\n        setError('Failed to load portfolio. Please try again later.');\n      }\n    } catch (error) {\n      console.error('Error fetching portfolio:', error);\n      setError('Failed to load portfolio. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const removeStock = async (symbol, quantity) => {\n    try {\n      const response = await axios.post('/api/portfolio/remove', \n        { SYMBOL: symbol, QUANTITY: quantity }, \n        { withCredentials: true, headers: { 'Authorization': `Bearer ${userId}` } }\n      );\n      if (response.status === 200) {\n        // Re-fetch portfolio to update UI\n        fetchPortfolio();\n        // Alternatively, manually adjust the portfolio state to reflect the removal\n      }\n    } catch (error) {\n      console.error('Error removing stock:', error);\n      setError('Failed to remove stock. Please try again later.');\n    }\n  };\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n\n  return (\n    <div>\n      <h1>Your Portfolio</h1>\n      <h2>Total Value: ${totalValue ? totalValue.toFixed(2) : '0.00'}</h2>\n      {portfolio.length > 0 ? (\n        <ul>\n          {portfolio.map((stock, index) => (\n            <li key={index}>\n              Symbol: {stock.SYMBOL}, Name: {stock.NAME}, Quantity: {stock.QUANTITY}, \n              Acquisition Price: {stock.ACQUISITION_PRICE}, Acquisition Date: {stock.ACQUISITION_DATE}, \n              Current Price: {stock.CURRENT_PRICE ? stock.CURRENT_PRICE.toFixed(2) : 'N/A'},\n              Current Value: {stock.CURRENT_VALUE ? stock.CURRENT_VALUE.toFixed(2) : 'N/A'}\n              <button onClick={() => removeStock(stock.SYMBOL, stock.QUANTITY)}>Remove</button>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>Your portfolio is empty.</p>\n      )}\n    </div>\n  );\n};\n\nexport default Portfolio;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACS,UAAU,EAAEC,aAAa,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM;IAAEe;EAAO,CAAC,GAAGb,OAAO,CAAC,CAAC;EAE5BH,SAAS,CAAC,MAAM;IACdiB,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACD,MAAM,CAAC,CAAC;EAEZ,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAACD,MAAM,EAAE;MACXD,QAAQ,CAAC,kCAAkC,CAAC;MAC5CF,UAAU,CAAC,KAAK,CAAC;MACjB;IACF;IAEA,IAAI;MACFA,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMK,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAE,gBAAe,EAAE;QACjDC,eAAe,EAAE,IAAI;QACrBC,OAAO,EAAE;UAAE,eAAe,EAAG,UAASL,MAAO;QAAE;MACjD,CAAC,CAAC;MACF,IAAIE,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACC,MAAM,EAAE;QACzCd,YAAY,CAACS,QAAQ,CAACI,IAAI,CAACC,MAAM,CAAC;QAClCZ,aAAa,CAACO,QAAQ,CAACI,IAAI,CAACE,mBAAmB,IAAI,CAAC,CAAC;MACvD,CAAC,MAAM;QACLC,OAAO,CAACX,KAAK,CAAC,gCAAgC,EAAEI,QAAQ,CAAC;QACzDH,QAAQ,CAAC,mDAAmD,CAAC;MAC/D;IACF,CAAC,CAAC,OAAOD,KAAK,EAAE;MACdW,OAAO,CAACX,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjDC,QAAQ,CAAC,mDAAmD,CAAC;IAC/D,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMa,WAAW,GAAG,MAAAA,CAAOC,MAAM,EAAEC,QAAQ,KAAK;IAC9C,IAAI;MACF,MAAMV,QAAQ,GAAG,MAAMhB,KAAK,CAAC2B,IAAI,CAAC,uBAAuB,EACvD;QAAEC,MAAM,EAAEH,MAAM;QAAEI,QAAQ,EAAEH;MAAS,CAAC,EACtC;QAAER,eAAe,EAAE,IAAI;QAAEC,OAAO,EAAE;UAAE,eAAe,EAAG,UAASL,MAAO;QAAE;MAAE,CAC5E,CAAC;MACD,IAAIE,QAAQ,CAACc,MAAM,KAAK,GAAG,EAAE;QAC3B;QACAf,cAAc,CAAC,CAAC;QAChB;MACF;IACF,CAAC,CAAC,OAAOH,KAAK,EAAE;MACdW,OAAO,CAACX,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7CC,QAAQ,CAAC,iDAAiD,CAAC;IAC7D;EACF,CAAC;EAED,IAAIH,OAAO,EAAE,oBAAOP,OAAA;IAAA4B,QAAA,EAAK;EAAU;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACzC,IAAIvB,KAAK,EAAE,oBAAOT,OAAA;IAAA4B,QAAA,GAAK,SAAO,EAACnB,KAAK;EAAA;IAAAoB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;EAE3C,oBACEhC,OAAA;IAAA4B,QAAA,gBACE5B,OAAA;MAAA4B,QAAA,EAAI;IAAc;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACvBhC,OAAA;MAAA4B,QAAA,GAAI,gBAAc,EAACvB,UAAU,GAAGA,UAAU,CAAC4B,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM;IAAA;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EACnE7B,SAAS,CAAC+B,MAAM,GAAG,CAAC,gBACnBlC,OAAA;MAAA4B,QAAA,EACGzB,SAAS,CAACgC,GAAG,CAAC,CAACC,KAAK,EAAEC,KAAK,kBAC1BrC,OAAA;QAAA4B,QAAA,GAAgB,UACN,EAACQ,KAAK,CAACX,MAAM,EAAC,UAAQ,EAACW,KAAK,CAACE,IAAI,EAAC,cAAY,EAACF,KAAK,CAACV,QAAQ,EAAC,uBACnD,EAACU,KAAK,CAACG,iBAAiB,EAAC,sBAAoB,EAACH,KAAK,CAACI,gBAAgB,EAAC,mBACzE,EAACJ,KAAK,CAACK,aAAa,GAAGL,KAAK,CAACK,aAAa,CAACR,OAAO,CAAC,CAAC,CAAC,GAAG,KAAK,EAAC,mBAC9D,EAACG,KAAK,CAACM,aAAa,GAAGN,KAAK,CAACM,aAAa,CAACT,OAAO,CAAC,CAAC,CAAC,GAAG,KAAK,eAC5EjC,OAAA;UAAQ2C,OAAO,EAAEA,CAAA,KAAMtB,WAAW,CAACe,KAAK,CAACX,MAAM,EAAEW,KAAK,CAACV,QAAQ,CAAE;UAAAE,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,GAL1EK,KAAK;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAMV,CACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,gBAELhC,OAAA;MAAA4B,QAAA,EAAG;IAAwB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAC/B;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC9B,EAAA,CAhFID,SAAS;EAAA,QAKMH,OAAO;AAAA;AAAA8C,EAAA,GALtB3C,SAAS;AAkFf,eAAeA,SAAS;AAAC,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
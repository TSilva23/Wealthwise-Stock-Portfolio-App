{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import axios from'axios';import{useUser}from'./Usercontext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function StockList(_ref){let{stocks}=_ref;const{userId}=useUser();// Retrieve the current user's ID from context\nconst addToPortfolio=symbol=>{// Assuming you have an endpoint to fetch the current stock price and date\naxios.get(\"https://capstoneprojectmcsbt1.ew.r.appspot.com/api/quote/\".concat(symbol)).then(response=>{const currentPrice=response.data['Global Quote']['05. price'];const currentDate=new Date().toISOString().slice(0,10);// YYYY-MM-DD\n// Add the stock to the portfolio\naxios.post('https://capstoneprojectmcsbt1.ew.r.appspot.com/api/portfolio/add',{USER_ID:userId,// Use the dynamically obtained user ID\nSYMBOL:symbol,QUANTITY:1,ACQUISITION_PRICE:currentPrice,ACQUISITION_DATE:currentDate}).then(()=>alert(\"\".concat(symbol,\" added to your portfolio.\"))).catch(error=>alert('Error adding stock to portfolio.'));}).catch(error=>{console.error('Error fetching current stock price:',error);alert('Failed to fetch current stock price. Please try again later.');});};if(!stocks||stocks.length===0){return/*#__PURE__*/_jsx(\"div\",{children:\"No stocks available.\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Stocks\"}),/*#__PURE__*/_jsx(\"ul\",{children:stocks.map((stock,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"https://capstoneprojectmcsbt1.ew.r.appspot.com/stock/\".concat(stock.symbol),style:{marginRight:'10px'},children:[stock.symbol,\" - \",stock.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToPortfolio(stock.symbol),children:\"Add to Portfolio\"})]},stock.symbol||index))})]});}export default StockList;","map":{"version":3,"names":["React","Link","axios","useUser","jsx","_jsx","jsxs","_jsxs","StockList","_ref","stocks","userId","addToPortfolio","symbol","get","concat","then","response","currentPrice","data","currentDate","Date","toISOString","slice","post","USER_ID","SYMBOL","QUANTITY","ACQUISITION_PRICE","ACQUISITION_DATE","alert","catch","error","console","length","children","map","stock","index","to","style","marginRight","name","onClick"],"sources":["/home/tristan/Desktop/Capstone project/Wealthwise/my-app/Client/src/Components/Stocklist.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useUser } from './Usercontext';\n\nfunction StockList({ stocks }) {\n  const { userId } = useUser(); // Retrieve the current user's ID from context\n  const addToPortfolio = (symbol) => {\n    // Assuming you have an endpoint to fetch the current stock price and date\n    axios.get(`https://capstoneprojectmcsbt1.ew.r.appspot.com/api/quote/${symbol}`)\n      .then(response => {\n        const currentPrice = response.data['Global Quote']['05. price'];\n        const currentDate = new Date().toISOString().slice(0, 10); // YYYY-MM-DD\n\n        // Add the stock to the portfolio\n        axios.post('https://capstoneprojectmcsbt1.ew.r.appspot.com/api/portfolio/add', {\n          USER_ID: userId, // Use the dynamically obtained user ID\n          SYMBOL: symbol,\n          QUANTITY: 1,\n          ACQUISITION_PRICE: currentPrice,\n          ACQUISITION_DATE: currentDate\n        })\n        .then(() => alert(`${symbol} added to your portfolio.`))\n        .catch(error => alert('Error adding stock to portfolio.'));\n      })\n      .catch(error => {\n        console.error('Error fetching current stock price:', error);\n        alert('Failed to fetch current stock price. Please try again later.');\n      });\n  };\n  if (!stocks || stocks.length === 0) {\n    return <div>No stocks available.</div>;\n  }\n\n  return (\n    <div>\n      <h1>All Stocks</h1>\n      <ul>\n        {stocks.map((stock, index) => (\n          <li key={stock.symbol || index}>\n            <Link to={`https://capstoneprojectmcsbt1.ew.r.appspot.com/stock/${stock.symbol}`} style={{ marginRight: '10px' }}>\n              {stock.symbol} - {stock.name}\n            </Link>\n            <button onClick={() => addToPortfolio(stock.symbol)}>Add to Portfolio</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default StockList;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAa,IAAZ,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC3B,KAAM,CAAEE,MAAO,CAAC,CAAGR,OAAO,CAAC,CAAC,CAAE;AAC9B,KAAM,CAAAS,cAAc,CAAIC,MAAM,EAAK,CACjC;AACAX,KAAK,CAACY,GAAG,6DAAAC,MAAA,CAA6DF,MAAM,CAAE,CAAC,CAC5EG,IAAI,CAACC,QAAQ,EAAI,CAChB,KAAM,CAAAC,YAAY,CAAGD,QAAQ,CAACE,IAAI,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,CAC/D,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAE;AAE3D;AACArB,KAAK,CAACsB,IAAI,CAAC,kEAAkE,CAAE,CAC7EC,OAAO,CAAEd,MAAM,CAAE;AACjBe,MAAM,CAAEb,MAAM,CACdc,QAAQ,CAAE,CAAC,CACXC,iBAAiB,CAAEV,YAAY,CAC/BW,gBAAgB,CAAET,WACpB,CAAC,CAAC,CACDJ,IAAI,CAAC,IAAMc,KAAK,IAAAf,MAAA,CAAIF,MAAM,6BAA2B,CAAC,CAAC,CACvDkB,KAAK,CAACC,KAAK,EAAIF,KAAK,CAAC,kCAAkC,CAAC,CAAC,CAC5D,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAI,CACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,CAAEA,KAAK,CAAC,CAC3DF,KAAK,CAAC,8DAA8D,CAAC,CACvE,CAAC,CAAC,CACN,CAAC,CACD,GAAI,CAACpB,MAAM,EAAIA,MAAM,CAACwB,MAAM,GAAK,CAAC,CAAE,CAClC,mBAAO7B,IAAA,QAAA8B,QAAA,CAAK,sBAAoB,CAAK,CAAC,CACxC,CAEA,mBACE5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,OAAA8B,QAAA,CAAI,YAAU,CAAI,CAAC,cACnB9B,IAAA,OAAA8B,QAAA,CACGzB,MAAM,CAAC0B,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBACvB/B,KAAA,OAAA4B,QAAA,eACE5B,KAAA,CAACN,IAAI,EAACsC,EAAE,yDAAAxB,MAAA,CAA0DsB,KAAK,CAACxB,MAAM,CAAG,CAAC2B,KAAK,CAAE,CAAEC,WAAW,CAAE,MAAO,CAAE,CAAAN,QAAA,EAC9GE,KAAK,CAACxB,MAAM,CAAC,KAAG,CAACwB,KAAK,CAACK,IAAI,EACxB,CAAC,cACPrC,IAAA,WAAQsC,OAAO,CAAEA,CAAA,GAAM/B,cAAc,CAACyB,KAAK,CAACxB,MAAM,CAAE,CAAAsB,QAAA,CAAC,kBAAgB,CAAQ,CAAC,GAJvEE,KAAK,CAACxB,MAAM,EAAIyB,KAKrB,CACL,CAAC,CACA,CAAC,EACF,CAAC,CAEV,CAEA,cAAe,CAAA9B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useUser}from'./Usercontext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Portfolio=()=>{const[portfolio,setPortfolio]=useState([]);const[totalValue,setTotalValue]=useState(0);// Initialized to 0 to avoid undefined\nconst[loading,setLoading]=useState(true);const[error,setError]=useState('');const{userId}=useUser();useEffect(()=>{const fetchPortfolio=async()=>{try{setLoading(true);const response=await axios.get(\"https://capstoneprojectmcsbt1.ew.r.appspot.com/api/portfolio\",{headers:{'Authorization':\"Bearer \".concat(userId)}});if(response.data&&response.data.stocks){setPortfolio(response.data.stocks);// Assuming response structure includes a \"stocks\" array\nsetTotalValue(response.data.total_current_value||0);// Fallback to 0 if undefined\n}else{// Handle unexpected response structure\nconsole.error('Unexpected response structure:',response);setError('Failed to load portfolio. Please try again later.');}}catch(error){console.error('Error fetching portfolio:',error);setError('Failed to load portfolio. Please try again later.');}finally{setLoading(false);}};if(userId){fetchPortfolio();}else{setError('No user ID found. Please log in.');setLoading(false);}},[userId]);// Dependency array includes userId to re-fetch if it changes\nif(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Portfolio\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Total Value: $\",totalValue?totalValue.toFixed(2):'0.00']}),portfolio.length>0?/*#__PURE__*/_jsx(\"ul\",{children:portfolio.map((stock,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"Symbol: \",stock.SYMBOL,\", Name: \",stock.NAME,\", Quantity: \",stock.QUANTITY,\", Acquisition Price: \",stock.ACQUISITION_PRICE,\", Acquisition Date: \",stock.ACQUISITION_DATE,\", Current Price: \",stock.CURRENT_PRICE?stock.CURRENT_PRICE.toFixed(2):'N/A',\", Current Value: \",stock.CURRENT_VALUE?stock.CURRENT_VALUE.toFixed(2):'N/A']},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"Your portfolio is empty.\"})]});};export default Portfolio;","map":{"version":3,"names":["React","useEffect","useState","axios","useUser","jsx","_jsx","jsxs","_jsxs","Portfolio","portfolio","setPortfolio","totalValue","setTotalValue","loading","setLoading","error","setError","userId","fetchPortfolio","response","get","headers","concat","data","stocks","total_current_value","console","children","toFixed","length","map","stock","index","SYMBOL","NAME","QUANTITY","ACQUISITION_PRICE","ACQUISITION_DATE","CURRENT_PRICE","CURRENT_VALUE"],"sources":["/home/tristan/Desktop/Capstone project/Wealthwise/my-app/Client/src/Components/Portfolio.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useUser } from './Usercontext';\n\nconst Portfolio = () => {\n  const [portfolio, setPortfolio] = useState([]);\n  const [totalValue, setTotalValue] = useState(0); // Initialized to 0 to avoid undefined\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { userId } = useUser();\n\n  useEffect(() => {\n    const fetchPortfolio = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get(`https://capstoneprojectmcsbt1.ew.r.appspot.com/api/portfolio`, {\n          headers: {\n            'Authorization': `Bearer ${userId}`\n          }\n        });\n        if (response.data && response.data.stocks) {\n          setPortfolio(response.data.stocks); // Assuming response structure includes a \"stocks\" array\n          setTotalValue(response.data.total_current_value || 0); // Fallback to 0 if undefined\n        } else {\n          // Handle unexpected response structure\n          console.error('Unexpected response structure:', response);\n          setError('Failed to load portfolio. Please try again later.');\n        }\n      } catch (error) {\n        console.error('Error fetching portfolio:', error);\n        setError('Failed to load portfolio. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (userId) {\n      fetchPortfolio();\n    } else {\n      setError('No user ID found. Please log in.');\n      setLoading(false);\n    }\n  }, [userId]); // Dependency array includes userId to re-fetch if it changes\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n\n  return (\n    <div>\n      <h1>Your Portfolio</h1>\n      <h2>Total Value: ${totalValue ? totalValue.toFixed(2) : '0.00'}</h2>\n      {portfolio.length > 0 ? (\n        <ul>\n          {portfolio.map((stock, index) => (\n            <li key={index}>\n              Symbol: {stock.SYMBOL}, Name: {stock.NAME}, Quantity: {stock.QUANTITY}, \n              Acquisition Price: {stock.ACQUISITION_PRICE}, Acquisition Date: {stock.ACQUISITION_DATE}, \n              Current Price: {stock.CURRENT_PRICE ? stock.CURRENT_PRICE.toFixed(2) : 'N/A'},\n              Current Value: {stock.CURRENT_VALUE ? stock.CURRENT_VALUE.toFixed(2) : 'N/A'}\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>Your portfolio is empty.</p>\n      )}\n    </div>\n  );\n};\n\nexport default Portfolio;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}